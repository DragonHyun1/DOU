# DAQ 측정 보정 팩터

**발견:** DoU의 shunt drop 측정이 Manual보다 크게 측정됨  
**원인:** DEFAULT terminal mode의 문제 또는 측정 경로 차이

---

## 📊 채널별 보정 팩터

### 계산 방법
```
보정 팩터 = Manual 전류 / DoU 전류
```

### 측정 데이터

| 채널 | DoU 전류 | Manual 전류 | 보정 팩터 | 비고 |
|------|----------|-------------|-----------|------|
| ai0 | -0.337mA | 0.08mA | 0.237 | 부호 반대 |
| ai1 | 0.789mA | 0.4mA | 0.507 | |
| ai2 | -1.786mA | -0.77mA | 0.431 | |
| ai3 | 6.533mA | 1.018mA | 0.156 | |
| ai4 | 0.337mA | 0.14mA | 0.415 | |
| ai5 | 2.984mA | 0.044mA | 0.015 | 비정상 |

### 보정 후 예상 결과

```python
ai0_corrected = -0.337 × 0.237 = -0.080mA ✓
ai1_corrected = 0.789 × 0.507 = 0.400mA ✓
ai2_corrected = -1.786 × 0.431 = -0.770mA ✓
ai3_corrected = 6.533 × 0.156 = 1.019mA ✓
ai4_corrected = 0.337 × 0.415 = 0.140mA ✓
ai5_corrected = 2.984 × 0.015 = 0.045mA ✓

총합: 2.454mA ≈ 2.5mA (Manual) ✓
```

---

## 🔍 패턴 분석

### 보정 팩터 그룹

**그룹 1 (ai1, ai2, ai4): 0.4~0.5**
```
평균: 0.45
비교적 일관성 있음
```

**그룹 2 (ai0): 0.24**
```
그룹 1의 절반
```

**그룹 3 (ai3): 0.16**
```
그룹 1의 1/3
가장 큰 편차
```

**그룹 4 (ai5): 0.015**
```
완전히 비정상
68배 차이
```

---

## 💡 원인 추정

### Shunt 저항 실제 값 차이 가능성

**만약 실제 shunt 값이 다르다면:**

```
측정 shunt drop = 실제 전류 × 실제 shunt

ai3 예시:
DoU 측정 shunt drop: 0.033mV
Manual 전류: 1.018mA

실제 shunt = 0.033mV / 1.018mA = 0.0324Ω

설정된 shunt: 0.005Ω
실제 shunt: 0.0324Ω (6.48배!)
```

### 채널별 실제 shunt 추정

| 채널 | 설정 Shunt | 추정 실제 Shunt | 비율 |
|------|-----------|----------------|------|
| ai0 | 0.01Ω | 0.042Ω | 4.2배 |
| ai1 | 0.1Ω | 0.197Ω | 2.0배 |
| ai2 | 0.005Ω | 0.012Ω | 2.3배 |
| ai3 | 0.005Ω | 0.032Ω | 6.5배 |
| ai4 | 0.1Ω | 0.241Ω | 2.4배 |
| ai5 | 0.01Ω | 0.68Ω | 68배 |

---

## 🎯 권장 조치

### 1단계: 하드웨어 실제 Shunt 확인

**보드에서 확인:**
```
ai3의 실제 shunt: _____Ω (설정: 0.005Ω)
ai5의 실제 shunt: _____Ω (설정: 0.01Ω)
```

### 2단계: Manual 툴 Shunt 설정 확인

**Manual에서 사용하는 shunt 값:**
```
ai3: _____Ω
ai5: _____Ω
```

### 3단계: 보정 적용 방법 선택

**옵션 A: Shunt 값 수정**
```
실제 측정된 값으로 DoU 설정 수정
```

**옵션 B: 보정 팩터 적용**
```
코드에 보정 팩터 추가
```

**옵션 C: 측정 방식 변경**
```
Terminal configuration 변경 시도
```
