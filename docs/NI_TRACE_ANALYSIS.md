# NI I/O Trace ë¶„ì„ - ë‹¤ë¥¸ íˆ´ vs ìš°ë¦¬ ì½”ë“œ

**ë‚ ì§œ:** 2025-11-04  
**ëª©ì :** ë‹¤ë¥¸ íˆ´ì˜ DAQ ì„¤ì • ë°©ì‹ ë¶„ì„ ë° ìš°ë¦¬ ì½”ë“œì™€ ë¹„êµ

---

## ğŸ“Š ë‹¤ë¥¸ íˆ´ì˜ DAQ ì„¤ì • (NI I/O Trace)

### 1. ì±„ë„ ì„¤ì •
```
DAQCreateAIVoltageChan (ai0~ai5, 6ê°œ ì±„ë„)
- Terminal: RSE (-1)
- Range: -5V ~ 5V
- Units: Volts
```

**í•µì‹¬:** **Voltage ì±„ë„**ì„ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤!

### 2. íƒ€ì´ë° ì„¤ì •
```
Sample Clock: 30000 Hz (30kHz)
Sample Mode: Continuous Samples
Samples Per Chan: 1000
Active Edge: Rising
Clock Source: OnboardClock
```

### 3. ì½ì€ ë°ì´í„° ìƒ˜í”Œ
```
Channel ai0: {8.8154E-05, 8.05082E-06, ...}
Channel ai1: {8.8154E-05, 8.8154E-05, ...}
Channel ai2: {4.81024E-05, -7.20523E-05, ...}
```

**ì¤‘ìš”:** ê°’ì´ **0.00008V ~ 0.0001V** (0.08mV ~ 0.1mV) ìˆ˜ì¤€ì…ë‹ˆë‹¤!

---

## ğŸ” í•µì‹¬ ë°œê²¬

### ë‹¤ë¥¸ íˆ´ë„ Voltage Modeë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤!

í•˜ì§€ë§Œ **ì¸¡ì • ìœ„ì¹˜**ê°€ ë‹¤ë¦…ë‹ˆë‹¤:

| í•­ëª© | ë‹¤ë¥¸ íˆ´ | ìš°ë¦¬ ì½”ë“œ (ì´ì „) | ìš°ë¦¬ ì½”ë“œ (ìˆ˜ì • í›„) |
|------|---------|-----------------|-------------------|
| **Mode** | Voltage | Voltage | Current |
| **ì¸¡ì •ê°’** | 0.08mV | 4200mV | ? |
| **ì¸¡ì • ëŒ€ìƒ** | Shunt ì–‘ë‹¨ ì „ì•• | Rail Voltage | DAQ Internal Current |

### ì™œ ë‹¤ë¥¸ íˆ´ì€ ì‘ì€ ê°’(0.08mV)ì„ ì¸¡ì •í• ê¹Œ?

**ì •ë‹µ:** Shunt Resistor **ì–‘ë‹¨ì˜ ì „ì•• ì°¨ì´**ë¥¼ ì¸¡ì •í•˜ê³  ìˆìŠµë‹ˆë‹¤!

```
Hardware ì—°ê²° (ì˜¬ë°”ë¥¸ ë°©ì‹):
â”Œâ”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”
â”‚VBAT â”‚â”€â”¬â”€â”€â”€â”‚ Shunt 0.01Î© â”‚â”€â”¬â”€â”€â”€â”‚ Loadâ”‚
â”‚4.2V â”‚ â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â””â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”˜ â”‚                    â”‚
        â”‚                    â”‚
     ai0(+)               ai1(+)
     DAQì¸¡ì •              DAQì¸¡ì •
     
ì¸¡ì •ê°’:
- ai0: 4.200V (Shunt ì•ë‹¨)
- ai1: 4.196V (Shunt ë’·ë‹¨)
- ì „ì•• ì°¨ì´: 0.004V = 4mV
- ì „ë¥˜ ê³„ì‚°: 4mV / 0.01Î© = 400mA âœ…
```

### ìš°ë¦¬ê°€ ì¸¡ì •í–ˆë˜ ë°©ì‹ (ì˜ëª»ë¨)

```
Hardware ì—°ê²° (ì˜ëª»ëœ ë°©ì‹):
â”Œâ”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”
â”‚VBAT â”‚â”€â”€â”€â”€â”€â”‚ Shunt 0.01Î© â”‚â”€â”€â”€â”€â”€â”‚ Loadâ”‚
â”‚4.2V â”‚                         â””â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”˜
   â”‚
 ai0(+)
 DAQì¸¡ì •
 
ì¸¡ì •ê°’:
- ai0: 4.200V (Rail Voltage ì§ì ‘ ì¸¡ì •)
- ì „ë¥˜ ê³„ì‚°: 4.2V / 0.01Î© = 420A âŒ (ì™„ì „íˆ í‹€ë¦¼!)
```

---

## ğŸ¯ ìš°ë¦¬ ì½”ë“œê°€ Current Modeë¡œ ë³€ê²½í•œ ì´ìœ 

ìœ„ì˜ Hardware ì—°ê²° ë¬¸ì œë¥¼ **ì†Œí”„íŠ¸ì›¨ì–´ì ìœ¼ë¡œ í•´ê²°**í•˜ê¸° ìœ„í•´:

```python
# Current Mode ì‚¬ìš©
temp_task.ai_channels.add_ai_current_chan(
    channel_name,
    min_val=-0.040,  # Â±40mA
    max_val=0.040,
    units=nidaqmx.constants.CurrentUnits.AMPS
)
```

**ì¥ì :**
- DAQê°€ ë‚´ë¶€ì ìœ¼ë¡œ Shuntë¥¼ í†µí•´ ì „ë¥˜ë¥¼ ì§ì ‘ ì¸¡ì •
- Hardware ì—°ê²° ë°©ì‹ì— ëœ ë¯¼ê°
- ê³„ì‚° ì˜¤ë¥˜ ê°€ëŠ¥ì„± ê°ì†Œ

---

## âš ï¸ ì‹¤ì œ ë¬¸ì œ ì›ì¸ ê°€ëŠ¥ì„±

### 1. Hardware ì—°ê²° ë¬¸ì œ (ê°€ì¥ ê°€ëŠ¥ì„± ë†’ìŒ)
```
í˜„ì¬ ì—°ê²° (ì¶”ì •):
- ai0: VBAT Rail (4.2V) ì§ì ‘ ì¸¡ì • âŒ
- ai1: VDD_1P8_AP Rail (1.8V) ì§ì ‘ ì¸¡ì • âŒ
```

**ì˜¬ë°”ë¥¸ ì—°ê²°:**
```
- ai0: VBAT Shunt ì•ë‹¨ ì¸¡ì •
- ai1: VBAT Shunt ë’·ë‹¨ ì¸¡ì •
ë˜ëŠ”
- ai0: VBAT Shunt ì „ìš© ì „ë¥˜ ì¸¡ì •ì 
```

### 2. ë‹¤ë¥¸ íˆ´ì˜ í›„ì²˜ë¦¬ (ê°€ëŠ¥ì„±)

ë‹¤ë¥¸ íˆ´ì´ ì´ë ‡ê²Œ ì²˜ë¦¬í•˜ê³  ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```python
# NI I/O Traceì—ì„œ ì½ì€ ê°’
voltage_reading = 8.8154E-05  # 0.088mV

# í›„ì²˜ë¦¬: ì´ ê°’ì´ ì´ë¯¸ Shunt ì „ì•• ê°•í•˜
shunt_r = 0.01  # 10mÎ©
current = voltage_reading / shunt_r
current_mA = current * 1000  # 8.8mA
```

---

## ğŸ“‹ í™•ì¸ì´ í•„ìš”í•œ ì‚¬í•­

### 1. Hardware ì—°ê²° í™•ì¸
- [ ] DAQ ì±„ë„ì´ **ì–´ë””ì—** ì—°ê²°ë˜ì–´ ìˆëŠ”ê°€?
  - Shunt ì–‘ë‹¨? âœ…
  - Rail Voltage ì§ì ‘? âŒ
  
### 2. Shunt Resistor ìœ„ì¹˜
- [ ] ê° Power Railë§ˆë‹¤ Shunt Resistorê°€ ìˆëŠ”ê°€?
- [ ] Shuntì˜ ì–‘ë‹¨ì´ ë³„ë„ ì¸¡ì •ì ìœ¼ë¡œ ë‚˜ì™€ìˆëŠ”ê°€?

### 3. DAQ ì¸¡ì • ëª¨ë“œ
- [ ] Current Modeê°€ ì§€ì›ë˜ëŠ” í•˜ë“œì›¨ì–´ì¸ê°€?
- [ ] Voltage Differential Modeê°€ ë” ì í•©í•œê°€?

---

## ğŸ’¡ ê¶Œì¥ ì¡°ì¹˜

### Option 1: Voltage Modeë¡œ ë˜ëŒë¦¬ë˜ Differential ì¸¡ì •

```python
# ë‘ ì±„ë„ì„ ì‚¬ìš©í•˜ì—¬ ì°¨ì´ ì¸¡ì •
with nidaqmx.Task() as task:
    # Shunt ì•ë‹¨
    task.ai_channels.add_ai_voltage_chan(
        f"{device}/ai0",
        min_val=-5.0, max_val=5.0
    )
    # Shunt ë’·ë‹¨  
    task.ai_channels.add_ai_voltage_chan(
        f"{device}/ai1",
        min_val=-5.0, max_val=5.0
    )
    
    voltages = task.read()
    shunt_voltage = voltages[0] - voltages[1]  # ì „ì•• ì°¨ì´
    current = shunt_voltage / shunt_r
```

### Option 2: Current Mode ìœ ì§€ (í˜„ì¬ ë°©ì‹)

Hardwareê°€ Current Modeë¥¼ ì§€ì›í•œë‹¤ë©´ í˜„ì¬ ì½”ë“œê°€ ì˜¬ë°”ë¦…ë‹ˆë‹¤.

### Option 3: ë‹¤ë¥¸ íˆ´ê³¼ ë™ì¼í•˜ê²Œ (ë‹¨ì¼ ì±„ë„ Voltage)

ë§Œì•½ Hardwareê°€ ì´ë¯¸ Shunt ì „ì••ë§Œ ì¸¡ì •í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆë‹¤ë©´:

```python
# ë‹¨ì¼ ì±„ë„ë¡œ Shunt ì „ì•• ì§ì ‘ ì½ê¸°
voltage = task.read()  # ì´ë¯¸ 0.08mV ê°™ì€ ì‘ì€ ê°’
current = voltage / shunt_r
```

---

## ğŸ”§ ë‹¤ìŒ ë‹¨ê³„

1. **Hardware ì—°ê²°ë„ í™•ì¸** - ê°€ì¥ ì¤‘ìš”!
2. **ë‹¤ë¥¸ íˆ´ì˜ ì½”ë“œ í™•ì¸** - í›„ì²˜ë¦¬ ë¡œì§ì´ ìˆëŠ”ì§€
3. **í…ŒìŠ¤íŠ¸ ì‹¤í–‰** - Current Modeë¡œ ì‹¤ì œ ê°’ í™•ì¸
4. **í•„ìš”ì‹œ Differential Voltage Modeë¡œ ë³€ê²½**

---

## ğŸ“ ê²°ë¡ 

**ë‹¤ë¥¸ íˆ´ê³¼ì˜ ì°¨ì´:**
- ë‹¤ë¥¸ íˆ´: Voltage Mode + Shunt ì–‘ë‹¨ ì „ì•• ì¸¡ì • (0.08mV)
- ìš°ë¦¬ (ìˆ˜ì • ì „): Voltage Mode + Rail Voltage ì¸¡ì • (4200mV) âŒ
- ìš°ë¦¬ (ìˆ˜ì • í›„): Current Mode + ì§ì ‘ ì „ë¥˜ ì¸¡ì • âœ…

**í•µì‹¬ ë¬¸ì œ:**
Hardware ì—°ê²°ì´ ì˜ëª»ë˜ì—ˆê±°ë‚˜, ì¸¡ì • ìœ„ì¹˜ê°€ ë‹¤ë¥¼ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤!
