# 3ë°° ìŠ¤ì¼€ì¼ë§ ì°¨ì´ ì§„ë‹¨ ê°€ì´ë“œ

**ë°œê²¬:** ai3 ì±„ë„ì˜ Max, Min, Range ëª¨ë‘ ì •í™•íˆ 3ë°° ì°¨ì´  
**ìƒíƒœ:** ì›ì¸ ì§„ë‹¨ ì¤‘

---

## ğŸ“Š í™•ì¸ëœ ë°ì´í„°

### ai3 ì±„ë„
```
                DoU          Manual       ë¹„ìœ¨
Max:           86.72mA      29.59mA      2.93ë°°
Min:           -4.33mA      -1.51mA      2.87ë°°  
Range:         91.04mA      31.10mA      2.93ë°°
í‰ê· :           6.533mA      ???mA        ???ë°° â† í™•ì¸ í•„ìš”!
```

---

## ğŸ” ì§„ë‹¨ ì²´í¬ë¦¬ìŠ¤íŠ¸

### [ ] 1ë‹¨ê³„: Manual í‰ê· ê°’ í™•ì¸ (ê°€ì¥ ì¤‘ìš”!)

**Manual íˆ´ì—ì„œ ai3ì˜ í‰ê·  ì „ë¥˜ í™•ì¸:**

```
ai3 í‰ê· : _______ mA

í•´ì„:
â–¡ ì•½ 2.18mA (6.533 / 3) â†’ í‰ê· ë„ 3ë°° ì°¨ì´ = Gain/Range ë¬¸ì œ
â–¡ ì•½ 6.5mA (DoUì™€ ë¹„ìŠ·) â†’ í‰ê· ì€ ê°™ìŒ = í•„í„°ë§/ì••ì¶• ë¬¸ì œ
â–¡ ê¸°íƒ€ _______ mA
```

### [ ] 2ë‹¨ê³„: Manual Voltage Range í™•ì¸

**Manual íˆ´ ì„¤ì • í™”ë©´ì—ì„œ:**

```
Voltage Input Range: 
â–¡ Â±10V
â–¡ Â±5V (DoUì™€ ë™ì¼)
â–¡ Â±2V
â–¡ Â±1.67V (5V / 3)
â–¡ Â±1V
â–¡ ê¸°íƒ€: _______ V
```

### [ ] 3ë‹¨ê³„: Manual Raw ì „ì•• í™•ì¸

**Manualì—ì„œ ai3ì˜ ì¸¡ì • ì „ì••:**

```
ai3 í‰ê·  ì „ì••: _______ mV

DoUëŠ” 0.033mVì˜€ìŒ
ë¹„ìœ¨ = 0.033 / Manual ì „ì•• = _______
```

### [ ] 4ë‹¨ê³„: ë‹¤ë¥¸ ì±„ë„ ë¹„êµ

**ë‹¤ë¥¸ ì±„ë„ë“¤ë„ 3ë°° ì°¨ì´ì¸ì§€ í™•ì¸:**

```
ì±„ë„  DoU í‰ê·    Manual í‰ê·    ë¹„ìœ¨
ai0   -0.337mA   _______mA    _______
ai1    0.789mA   _______mA    _______
ai2   -1.786mA   _______mA    _______
ai3    6.533mA   _______mA    _______
ai4    0.337mA   _______mA    _______
ai5    2.984mA   _______mA    _______

í•´ì„:
â–¡ ëª¨ë“  ì±„ë„ì´ 3ë°° ì°¨ì´ â†’ ì „ì—­ Gain/Range ë¬¸ì œ
â–¡ ai3ë§Œ 3ë°° ì°¨ì´ â†’ ai3 ì±„ë„ë³„ ì„¤ì • ë¬¸ì œ
â–¡ ì¼ë¶€ë§Œ 3ë°° ì°¨ì´ â†’ _____ ì±„ë„ ê·¸ë£¹ ë¬¸ì œ
```

### [ ] 5ë‹¨ê³„: Manual ì••ì¶• ì„¤ì • í™•ì¸

**Manual íˆ´ì˜ ë°ì´í„° ì²˜ë¦¬ ë°©ì‹:**

```
ìƒ˜í”Œë§ ë ˆì´íŠ¸: _______ Hz (DoUëŠ” 30kHz)
ì›ë³¸ ìƒ˜í”Œ ìˆ˜: _______ ê°œ (DoUëŠ” 300,000ê°œ)
ì••ì¶• ë¹„ìœ¨: _______ :1 (DoUëŠ” 30:1)
ì••ì¶• ë°©ì‹:
â–¡ ì‚°ìˆ  í‰ê·  (Arithmetic Mean)
â–¡ ì¤‘ì•™ê°’ (Median)
â–¡ RMS (Root Mean Square)
â–¡ ì´ë™ í‰ê·  (Moving Average)
â–¡ ê¸°íƒ€: _______
```

---

## ğŸ¯ ì›ì¸ë³„ í•´ê²° ë°©ë²•

### Case A: í‰ê· ë„ 3ë°° ì°¨ì´ (Gain/Range ë¬¸ì œ)

**ì§„ë‹¨ ê²°ê³¼:**
```
ai3 í‰ê· : 2.18mA (DoU: 6.533mA)
ë¹„ìœ¨: 3ë°°
```

**ì›ì¸:**
- Voltage Range ì°¨ì´ (Â±5V vs Â±1.67V)
- ë˜ëŠ” ADC Gain ì°¨ì´

**í•´ê²°ì±… 1: DoU Range ìˆ˜ì •**
```python
# services/ni_daq.py Line 1329-1330
min_val=-1.67, max_val=1.67  # Manualê³¼ ë™ì¼í•˜ê²Œ
```

**í•´ê²°ì±… 2: Scale Factor ì ìš©**
```python
# ì„ì‹œ ë³´ì •
SCALE_FACTOR = 1.0 / 3.0
current_corrected = current_measured * SCALE_FACTOR
```

### Case B: í‰ê· ì€ ê°™ê³  Max/Minë§Œ ì°¨ì´ (í•„í„°ë§ ë¬¸ì œ)

**ì§„ë‹¨ ê²°ê³¼:**
```
ai3 í‰ê· : 6.5mA (DoUì™€ ë¹„ìŠ·)
í•˜ì§€ë§Œ Max: 29.59mA (DoU: 86.72mA)
```

**ì›ì¸:**
- Manualì´ ë” aggressiveí•œ í•„í„°ë§ ì‚¬ìš©
- ì´ìƒì¹˜(outlier) ì œê±°
- Median í•„í„° ë˜ëŠ” ë” í° ì••ì¶• ë¹„ìœ¨

**í•´ê²°ì±…: DoU í•„í„°ë§ ê°•í™”**
```python
# Median í•„í„° ì ìš©
def compress_with_median(data, compress_ratio):
    compressed = []
    for i in range(0, len(data), compress_ratio):
        group = data[i:i+compress_ratio]
        median_val = sorted(group)[len(group)//2]
        compressed.append(median_val)
    return compressed

# ë˜ëŠ” ì´ìƒì¹˜ ì œê±° í›„ í‰ê· 
def compress_with_trimmed_mean(data, compress_ratio, trim_percent=10):
    compressed = []
    for i in range(0, len(data), compress_ratio):
        group = sorted(data[i:i+compress_ratio])
        trim_count = int(len(group) * trim_percent / 100)
        trimmed = group[trim_count:-trim_count]
        avg = sum(trimmed) / len(trimmed)
        compressed.append(avg)
    return compressed
```

### Case C: íŠ¹ì • ì±„ë„ë§Œ 3ë°° ì°¨ì´

**ì§„ë‹¨ ê²°ê³¼:**
```
ai3ë§Œ 3ë°° ì°¨ì´
ë‹¤ë¥¸ ì±„ë„ì€ ë¹„ìŠ·
```

**ì›ì¸:**
- ai3ì˜ Shunt ì €í•­ ê°’ì´ í‹€ë¦¼
- ai3ì˜ ì±„ë„ ì„¤ì •ì´ ë‹¤ë¦„

**í•´ê²°ì±…:**
```
ai3ì˜ shunt ì €í•­ ì¬í™•ì¸
ì‹¤ì œ í•˜ë“œì›¨ì–´ ê°’ í™•ì¸
```

---

## ğŸ“ ì§„ë‹¨ ê²°ê³¼ ê¸°ë¡

### í™•ì¸ëœ ê°’ë“¤

**1. Manual í‰ê· ê°’:**
```
ai3 í‰ê· : _______ mA
```

**2. Voltage Range:**
```
Manual: Â±_______ V
DoU:    Â±5V
```

**3. ë¹„ìœ¨ ê³„ì‚°:**
```
í‰ê·  ë¹„ìœ¨: DoU / Manual = _______
Max ë¹„ìœ¨:  86.72 / 29.59 = 2.93ë°°
Min ë¹„ìœ¨:  4.33 / 1.51 = 2.87ë°°
```

**4. ê²°ë¡ :**
```
â–¡ Case A: Gain/Range ë¬¸ì œ (í‰ê· ë„ 3ë°°)
â–¡ Case B: í•„í„°ë§ ë¬¸ì œ (í‰ê· ì€ ê°™ìŒ)
â–¡ Case C: ì±„ë„ë³„ ì„¤ì • ë¬¸ì œ
```

---

## ğŸ”§ ì ìš©í•  ìˆ˜ì •ì‚¬í•­

**ì„ íƒí•œ í•´ê²°ì±…:**
```
â–¡ Voltage Rangeë¥¼ Â±_____Vë¡œ ìˆ˜ì •
â–¡ Scale Factor _____ë°° ì ìš©
â–¡ í•„í„°ë§ ì•Œê³ ë¦¬ì¦˜ ë³€ê²½: _______
â–¡ Shunt ì €í•­ ìˆ˜ì •: _______Î©
â–¡ ê¸°íƒ€: _______
```

**ìˆ˜ì • í›„ ì˜ˆìƒ ê²°ê³¼:**
```
ai3 í‰ê· : 6.533mA â†’ _______mA
ì´í•©: 14.4mA â†’ _______mA (ëª©í‘œ: 2.5mA)
```

---

## âœ… ê²€ì¦ ë°©ë²•

**ìˆ˜ì • í›„ ë‹¤ìŒì„ í™•ì¸:**

1. **ai3 í‰ê· ê°’ì´ Manualê³¼ ì¼ì¹˜í•˜ëŠ”ì§€**
2. **ai3 Max/Minì´ Manualê³¼ ë¹„ìŠ·í•œì§€**
3. **ì´í•©ì´ 2.5mAì— ê°€ê¹Œìš´ì§€**
4. **ë‹¤ë¥¸ ì±„ë„ë“¤ë„ ì •ìƒì¸ì§€**

---

**ì´ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ì‘ì„±í•´ì„œ ì•Œë ¤ì£¼ì‹œë©´ ì •í™•í•œ í•´ê²°ì±…ì„ ì œì‹œí•˜ê² ìŠµë‹ˆë‹¤!**
